---
layout: post
title: "Changing the way we're releasing"
title-short: Changing our releasing
tags: [snowplow, releases, pipeline, repo]
author: Steve
category: Releases
permalink: /blog/2020/07/16/changing-releasing/
---

## We have changed the way we’re releasing
*TL;DR*: The `snowplow/snowplow` repo is no longer where you’ll find code for the key components. There are links in the [readme|sp_repo] and this article to their new locations. If you’re consuming the assets there is no change. We will no long be publishing the R*** releases - you can find the most recent recommended bundles on [our new release matrix|matrix]. If you’re only consuming the published assets, nothing has changed for you.

As we announced with the failed events production release, it is the last in a long line of umbrella releases - 119 in fact! We have long used these to indicate that the assets generated by the `snowplow/snowplow` repo were compatible with each other and that it’s our recommendation to move to them. This assurance is important, but the way we were putting it together has been slowing us down. In an effort to bring improvements to you faster, we’re making some changes.

As a reminder, the `snowplow/snowplow` monorepo has recently been the home for multiple key components: EMR ETL Runner, Scala Common Enrich, Beam Enrich, Stream Enrich and Scala Stream Collector. It used to also contain the batch pipeline components. There are a number of other pipeline components outside of this stack that need assurance around compatibility, such as the loaders and recovery tooling. So our umbrella releases have only been covering part of the estate. We want to provide a clearer and broader level of assurance.

The _way_ we were forming these releases has also been slowing us down. Every change to `snowplow/snowplow` has been wrapped up in an umbrella release. Our umbrella release process has a lot of steps. Given there’s an overhead, we try to get as much value from them as possible. You’ll likely be familiar with where this scenario ends! The temptation is to put more in the release, in turn making the overhead larger, tempting everyone to add more. The snowball gains pace.

Last, but still significant problem, is patching has had no natural home. We test our builds thoroughly - we will continue to do so! However, there are so many different ways to collect data we can’t guarantee our tests cover every use case. We of course need to patch sometimes. If every patch needs an umbrella release it means both our fanfare moments and our tiny oh-shoot patches get the same treatment.

## Moving out of the monorepo
It’s worth noting the issues above were not the fault of a monorepo - each were solvable within that construct. However, when we sat down a while back and thought about what our ideal design would look like it didn’t include the monorepo, so we’re making moves to disband it.

Each of the aforementioned services are now sitting in their own repos and will be iterated from there.
* [EMR ETL Runner|emr_repo],
* [Enrich|enr_repo] (Common, Beam and Stream)
* [Stream Collector|stc_repo]

We’re also dropping the “Scala” from some of the services to neaten things up, however it’s important to note that all published assets will continue to have the same names. If you’re consuming Snowplow only using the assets nothing has changed. We will of course maintain and continue to increment their version numbers too. To help communicate changes, we’ll be strict with our adoption of semantic versioning to denote changes in interfaces.

Now when we have a new version of a component, we will publish it straight away. It will be fully tested as a component and with the components it relates to. It may not be battle hardened enough for us to recommend it. When it is, the version will appear on the [recommended releases matrix|matrix]. This will be us telling the community that we recommend moving to this version. Of course in the interim that component will be available for you to battle test yourself and we’d love your feedback.

We will be keeping `snowplow/snowplow` as a signpost to the new repos, to be a jump off point for any new community member learning about Snowplow for the first time, and for nostalgia. We could never delete a repo that gave so much x x x. We’re moving issues related to components out to their respective new repos. Anything left can be joined by new issues related to the overarching Snowplow strategy.

## Beyond recommended releases
We’re confident that this is going to help us to get changes to our stack to our community quicker, but it’s only the first step. Users of Snowplow may be familiar already with our tracker protocol. This dictates what a tracker must pass the Collector in order for a call to be accurately processed, and is immensely useful for iterating the trackers with confidence. 

We’d like to extend our use of protocols between other components too. They’re not easy to write, so will take some time, but we believe that betweens strict semantic versioning and extensive adoption of protocols with automated tests to assure, we should be able to recommend our releases a lot quicker - if not automatically.

## What do you need to do?
If you’re consuming Snowplow via the assets - nothing. If you’re a keen contributor and are wondering where all the code has gone - see the new repos. If you have any strong opinions on where this goes next do please [reach out on Discourse|discourse].

[discourse]: https://discourse.snowplowanalytics.com/
[matrix]: https://docs.snowplowanalytics.com/docs/open-source-components-and-applications/version-compatibility-matrix/
[sp_repo]: https://github.com/snowplow/snowplow
[emr_repo]: https://github.com/snowplow/emr-etl-runner
[enr_repo]: https://github.com/snowplow/enrich
[stc_repo]:https://github.com/snowplow/stream-collector
